{"remainingRequest":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/babel-loader/lib/index.js!/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/ts-loader/index.js??ref--15-2!/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/eslint-loader/index.js??ref--13-0!/Users/junronngcai/Downloads/vue3-json-schema-form/lib/SchemaForm.tsx","dependencies":[{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/lib/SchemaForm.tsx","mtime":1608950288324},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/cache-loader/dist/cjs.js","mtime":1607437832202},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/babel-loader/lib/index.js","mtime":1608516392415},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/ts-loader/index.js","mtime":1608516394013},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/eslint-loader/index.js","mtime":1607437999134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvanVucm9ubmdjYWkvRG93bmxvYWRzL3Z1ZTMtanNvbi1zY2hlbWEtZm9ybS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9qdW5yb25uZ2NhaS9Eb3dubG9hZHMvdnVlMy1qc29uLXNjaGVtYS1mb3JtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBwcm92aWRlLCBzaGFsbG93UmVmLCB3YXRjaEVmZmVjdCwgd2F0Y2gsIHJlZiwgY29tcHV0ZWQsIGNyZWF0ZVZOb2RlIH0gZnJvbSAidnVlIjsKaW1wb3J0IEFqdiBmcm9tICdhanYnOwppbXBvcnQgU2NoZW1hSXRlbSBmcm9tICcuL1NjaGVtYUl0ZW0nOwppbXBvcnQgeyBTY2hlbWFGb3JtQ29udGV4dEtleSB9IGZyb20gJy4vY29udGV4dCc7CmltcG9ydCB7IHZhbGlkYXRlRm9ybURhdGEgfSBmcm9tICcuL3ZhbGlkYXRvcic7CnZhciBkZWZhdWx0QWp2T3B0aW9ucyA9IHsKICBhbGxFcnJvcnM6IHRydWUKfTsKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICBwcm9wczogewogICAgc2NoZW1hOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB2YWx1ZTogewogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIG9uQ2hhbmdlOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGNvbnRleHRSZWY6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgYWp2T3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICBsb2NhbGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnemgnCiAgICB9LAogICAgY3VzdG9tVmFsaWRhdGU6IHsKICAgICAgdHlwZTogRnVuY3Rpb24KICAgIH0sCiAgICBjdXN0b21Gb3JtYXRzOiB7CiAgICAgIHR5cGU6IFtBcnJheSwgT2JqZWN0XQogICAgfSwKICAgIGN1c3RvbUtleXdvcmRzOiB7CiAgICAgIHR5cGU6IFtBcnJheSwgT2JqZWN0XQogICAgfSwKICAgIHVpU2NoZW1hOiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfQogIH0sCiAgbmFtZTogJ1NjaGVtYUZvcm0nLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcywgX3JlZikgewogICAgdmFyIHNsb3RzID0gX3JlZi5zbG90cywKICAgICAgICBlbWl0ID0gX3JlZi5lbWl0LAogICAgICAgIGF0dHJzID0gX3JlZi5hdHRyczsKCiAgICB2YXIgaGFuZGxlQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKHYpIHsKICAgICAgcHJvcHMub25DaGFuZ2Uodik7CiAgICB9OwoKICAgIHZhciBlcnJvclNjaGVtYVJlZiA9IHNoYWxsb3dSZWYoe30pOwogICAgdmFyIHZhbGlkYXRvclJlZiA9IHNoYWxsb3dSZWYoKTsKICAgIHdhdGNoRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgICAgLy/liqjmgIHojrflj5bmnIDmlrDnmoQKICAgICAgdmFsaWRhdG9yUmVmLnZhbHVlID0gbmV3IEFqdihfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRBanZPcHRpb25zKSwgcHJvcHMuYWp2T3B0aW9ucykpOwoKICAgICAgaWYgKHByb3BzLmN1c3RvbUZvcm1hdHMpIHsKICAgICAgICB2YXIgY3VzdG9tRm9ybWF0cyA9IEFycmF5LmlzQXJyYXkocHJvcHMuY3VzdG9tRm9ybWF0cykgPyBwcm9wcy5jdXN0b21Gb3JtYXRzIDogW3Byb3BzLmN1c3RvbUZvcm1hdHNdOwogICAgICAgIGN1c3RvbUZvcm1hdHMuZm9yRWFjaChmdW5jdGlvbiAoZm9ybWF0KSB7CiAgICAgICAgICB2YWxpZGF0b3JSZWYudmFsdWUuYWRkRm9ybWF0KGZvcm1hdC5uYW1lLCBmb3JtYXQuZGVmaW5pdGlvbik7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChwcm9wcy5jdXN0b21LZXl3b3JkcykgewogICAgICAgIHZhciBjdXN0b21LZXl3b3JkcyA9IEFycmF5LmlzQXJyYXkocHJvcHMuY3VzdG9tS2V5d29yZHMpID8gcHJvcHMuY3VzdG9tS2V5d29yZHMgOiBbcHJvcHMuY3VzdG9tS2V5d29yZHNdOwogICAgICAgIGN1c3RvbUtleXdvcmRzLmZvckVhY2goZnVuY3Rpb24gKGtleXdvcmQpIHsKICAgICAgICAgIHJldHVybiB2YWxpZGF0b3JSZWYudmFsdWUuYWRkS2V5d29yZChrZXl3b3JkLm5hbWUsIGtleXdvcmQuZGVpbml0aW9uKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICB2YXIgdmFsaWRhdGVSZXNvbHZlUmVmID0gcmVmKCk7CiAgICB2YXIgdmFsaWRhdGVJbmRleCA9IHJlZigwKTsKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLnZhbHVlOwogICAgfSwgZnVuY3Rpb24gKCkgewogICAgICBpZiAodmFsaWRhdGVSZXNvbHZlUmVmLnZhbHVlKSB7CiAgICAgICAgX2RvVmFsaWRhdGUyKCk7CiAgICAgIH0KICAgIH0sIHsKICAgICAgZGVlcDogdHJ1ZQogICAgfSk7CgogICAgZnVuY3Rpb24gX2RvVmFsaWRhdGUyKCkgewogICAgICByZXR1cm4gX2RvVmFsaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfZG9WYWxpZGF0ZSgpIHsKICAgICAgX2RvVmFsaWRhdGUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGluZGV4LCByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IHZhbGlkYXRlIC0tLS0tLS0tPicpOwogICAgICAgICAgICAgICAgaW5kZXggPSB2YWxpZGF0ZUluZGV4LnZhbHVlICs9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUZvcm1EYXRhKHZhbGlkYXRvclJlZi52YWx1ZSwgcHJvcHMudmFsdWUsIHByb3BzLnNjaGVtYSwgcHJvcHMubG9jYWxlLCBwcm9wcy5jdXN0b21WYWxpZGF0ZSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoaW5kZXggIT09IHZhbGlkYXRlSW5kZXgudmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VuZCB2YWxpZGF0ZSAtLS0tLS0tLT4nKTsKICAgICAgICAgICAgICAgIGVycm9yU2NoZW1hUmVmLnZhbHVlID0gcmVzdWx0LmVycm9yU2NoZW1hOwogICAgICAgICAgICAgICAgdmFsaWRhdGVSZXNvbHZlUmVmLnZhbHVlKHJlc3VsdCk7CiAgICAgICAgICAgICAgICB2YWxpZGF0ZVJlc29sdmVSZWYudmFsdWUgPSB1bmRlZmluZWQ7IC8vIHJldHVybiByZXN1bHQKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfZG9WYWxpZGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIHdhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHByb3BzLmNvbnRleHRSZWY7CiAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChwcm9wcy5jb250ZXh0UmVmKSB7CiAgICAgICAgcHJvcHMuY29udGV4dFJlZi52YWx1ZSA9IHsKICAgICAgICAgIGRvVmFsaWRhdGU6IGZ1bmN0aW9uIGRvVmFsaWRhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgIHZhbGlkYXRlUmVzb2x2ZVJlZi52YWx1ZSA9IHJlc29sdmU7CgogICAgICAgICAgICAgIF9kb1ZhbGlkYXRlMigpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CiAgICB9LCB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSk7CiAgICB2YXIgZm9ybWF0TWFwUmVmID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICBpZiAocHJvcHMuY3VzdG9tRm9ybWF0cykgewogICAgICAgIHZhciBjdXN0b21Gb3JtYXRzID0gQXJyYXkuaXNBcnJheShwcm9wcy5jdXN0b21Gb3JtYXRzKSA/IHByb3BzLmN1c3RvbUZvcm1hdHMgOiBbcHJvcHMuY3VzdG9tRm9ybWF0c107CiAgICAgICAgcmV0dXJuIGN1c3RvbUZvcm1hdHMucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGZvcm1hdCkgewogICAgICAgICAgLy8gdmFsaWRhdG9yUmVmLnZhbHVlLmFkZEZvcm1hdChmb3JtYXQubmFtZSwgZm9ybWF0LmRlZmluaXRpb24pCiAgICAgICAgICByZXN1bHRbZm9ybWF0Lm5hbWVdID0gZm9ybWF0LmNvbXBvbmVudDsKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfSwge30pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfSk7CiAgICB2YXIgdHJhbnNmb3JtU2NoZW1hUmVmID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICBpZiAocHJvcHMuY3VzdG9tS2V5d29yZHMpIHsKICAgICAgICB2YXIgY3VzdG9tS2V5d29yZHMgPSBBcnJheS5pc0FycmF5KHByb3BzLmN1c3RvbUtleXdvcmRzKSA/IHByb3BzLmN1c3RvbUtleXdvcmRzIDogW3Byb3BzLmN1c3RvbUtleXdvcmRzXTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjaGVtYSkgewogICAgICAgICAgdmFyIG5ld1NjaGVtYSA9IHNjaGVtYTsKICAgICAgICAgIGN1c3RvbUtleXdvcmRzLmZvckVhY2goZnVuY3Rpb24gKGtleXdvcmQpIHsKICAgICAgICAgICAgaWYgKG5ld1NjaGVtYVtrZXl3b3JkLm5hbWVdKSB7CiAgICAgICAgICAgICAgbmV3U2NoZW1hID0ga2V5d29yZC50cmFuc2Zvcm1TY2hlbWEoc2NoZW1hKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gbmV3U2NoZW1hOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiBmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBzOwogICAgICB9OwogICAgfSk7CiAgICB2YXIgY29udGV4dCA9IHsKICAgICAgU2NoZW1hSXRlbTogU2NoZW1hSXRlbSwKICAgICAgZm9ybWF0TWFwUmVmOiBmb3JtYXRNYXBSZWYsCiAgICAgIHRyYW5zZm9ybVNjaGVtYVJlZjogdHJhbnNmb3JtU2NoZW1hUmVmCiAgICB9OwogICAgcHJvdmlkZShTY2hlbWFGb3JtQ29udGV4dEtleSwgY29udGV4dCk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2NoZW1hID0gcHJvcHMuc2NoZW1hLAogICAgICAgICAgdmFsdWUgPSBwcm9wcy52YWx1ZSwKICAgICAgICAgIHVpU2NoZW1hID0gcHJvcHMudWlTY2hlbWE7CiAgICAgIHJldHVybiBjcmVhdGVWTm9kZShTY2hlbWFJdGVtLCB7CiAgICAgICAgInNjaGVtYSI6IHNjaGVtYSwKICAgICAgICAicm9vdFNjaGVtYSI6IHNjaGVtYSwKICAgICAgICAidmFsdWUiOiB2YWx1ZSwKICAgICAgICAib25DaGFuZ2UiOiBoYW5kbGVDaGFuZ2UsCiAgICAgICAgInVpU2NoZW1hIjogdWlTY2hlbWEgfHwge30sCiAgICAgICAgImVycm9yU2NoZW1hIjogZXJyb3JTY2hlbWFSZWYudmFsdWUgfHwge30KICAgICAgfSwgbnVsbCk7CiAgICB9OwogIH0KfSk7"},{"version":3,"sources":["/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/eslint-loader/index.js??ref--13-0!/Users/junronngcai/Downloads/vue3-json-schema-form/lib/SchemaForm.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  defineComponent,\n  PropType,\n  provide,\n  Ref,\n  shallowRef,\n  watchEffect,\n  watch,\n  ref,\n  computed,\n} from 'vue'\n\nimport Ajv, { Options } from 'ajv'\n\nimport {\n  CustomFormat,\n  CustomKeyword,\n  Schema,\n  SchemaTypes,\n  Theme,\n  UISchema,\n  CommonWidgetDefine,\n} from './types'\n\nimport SchemaItem from './SchemaItem'\nimport { SchemaFormContextKey } from './context'\nimport { validateFormData, ErrorSchema } from './validator'\n\n// 在父组件中使用\ninterface ContextRef {\n  doValidate: () => Promise<{\n    errors: any[]\n    valid: boolean\n  }>\n}\n\nconst defaultAjvOptions: Options = {\n  allErrors: true,\n  // jsonPointers: true,\n}\n\nexport default defineComponent({\n  props: {\n    schema: {\n      type: Object as PropType<Schema>,\n      required: true,\n    },\n    value: {\n      required: true,\n    },\n    onChange: {\n      type: Function as PropType<(v: any) => void>,\n      required: true,\n    },\n    contextRef: {\n      type: Object as PropType<Ref<ContextRef | undefined>>,\n    },\n    ajvOptions: {\n      type: Object as PropType<Options>,\n    },\n    locale: {\n      type: String,\n      default: 'zh',\n    },\n    customValidate: {\n      type: Function as PropType<(data: any, errors: any) => void>,\n    },\n    customFormats: {\n      type: [Array, Object] as PropType<CustomFormat[] | CustomFormat>,\n    },\n    customKeywords: {\n      type: [Array, Object] as PropType<CustomKeyword[] | CustomKeyword>,\n    },\n    uiSchema: {\n      type: Object as PropType<UISchema>,\n    },\n  },\n  name: 'SchemaForm',\n  setup(props, { slots, emit, attrs }) {\n    const handleChange = (v: any) => {\n      props.onChange(v)\n    }\n\n    const errorSchemaRef: Ref<ErrorSchema> = shallowRef({})\n\n    const validatorRef: Ref<Ajv.Ajv> = shallowRef() as any\n\n    watchEffect(() => {\n      //动态获取最新的\n      validatorRef.value = new Ajv({\n        ...defaultAjvOptions,\n        ...props.ajvOptions,\n      })\n\n      if (props.customFormats) {\n        const customFormats = Array.isArray(props.customFormats)\n          ? props.customFormats\n          : [props.customFormats]\n        customFormats.forEach((format) => {\n          validatorRef.value.addFormat(format.name, format.definition)\n        })\n      }\n\n      if (props.customKeywords) {\n        const customKeywords = Array.isArray(props.customKeywords)\n          ? props.customKeywords\n          : [props.customKeywords]\n        customKeywords.forEach((keyword) =>\n          validatorRef.value.addKeyword(keyword.name, keyword.deinition),\n        )\n      }\n    })\n\n    const validateResolveRef = ref()\n    const validateIndex = ref(0)\n\n    watch(\n      () => props.value,\n      () => {\n        if (validateResolveRef.value) {\n          doValidate()\n        }\n      },\n      { deep: true },\n    )\n\n    async function doValidate() {\n      console.log('start validate -------->')\n      const index = (validateIndex.value += 1)\n      const result = await validateFormData(\n        validatorRef.value,\n        props.value,\n        props.schema,\n        props.locale,\n        props.customValidate,\n      )\n      if (index !== validateIndex.value) return\n      console.log('end validate -------->')\n\n      errorSchemaRef.value = result.errorSchema\n\n      validateResolveRef.value(result)\n      validateResolveRef.value = undefined\n\n      // return result\n    }\n\n    watch(\n      () => props.contextRef,\n      () => {\n        if (props.contextRef) {\n          props.contextRef.value = {\n            doValidate() {\n              return new Promise((resolve) => {\n                validateResolveRef.value = resolve\n                doValidate()\n              })\n            },\n          }\n        }\n      },\n      {\n        immediate: true,\n      },\n    )\n\n    const formatMapRef = computed(() => {\n      if (props.customFormats) {\n        const customFormats = Array.isArray(props.customFormats)\n          ? props.customFormats\n          : [props.customFormats]\n        return customFormats.reduce((result, format) => {\n          // validatorRef.value.addFormat(format.name, format.definition)\n          result[format.name] = format.component\n          return result\n        }, {} as { [key: string]: CommonWidgetDefine })\n      } else {\n        return {}\n      }\n    })\n\n    const transformSchemaRef = computed(() => {\n      if (props.customKeywords) {\n        const customKeywords = Array.isArray(props.customKeywords)\n          ? props.customKeywords\n          : [props.customKeywords]\n\n        return (schema: Schema) => {\n          let newSchema = schema\n          customKeywords.forEach((keyword) => {\n            if ((newSchema as any)[keyword.name]) {\n              newSchema = keyword.transformSchema(schema)\n            }\n          })\n          return newSchema\n        }\n      }\n      return (s: Schema) => s\n    })\n\n    const context: any = {\n      SchemaItem,\n      formatMapRef,\n      transformSchemaRef,\n      // theme: props.theme,\n    }\n\n    provide(SchemaFormContextKey, context)\n\n    return () => {\n      const { schema, value, uiSchema } = props\n      return (\n        <SchemaItem\n          schema={schema}\n          rootSchema={schema}\n          value={value}\n          onChange={handleChange}\n          uiSchema={uiSchema || {}}\n          errorSchema={errorSchemaRef.value || {}}\n        />\n      )\n    }\n  },\n})\n"],"sourceRoot":""}]}