{"remainingRequest":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/babel-loader/lib/index.js!/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/ts-loader/index.js??ref--15-2!/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/eslint-loader/index.js??ref--13-0!/Users/junronngcai/Downloads/vue3-json-schema-form/src/components/MonacoEditor.tsx","dependencies":[{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/src/components/MonacoEditor.tsx","mtime":1608516377733},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/cache-loader/dist/cjs.js","mtime":1607437832202},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/babel-loader/lib/index.js","mtime":1608516392415},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/ts-loader/index.js","mtime":1608516394013},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/eslint-loader/index.js","mtime":1607437999134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCByZWYsIG9uTW91bnRlZCwgd2F0Y2gsIG9uQmVmb3JlVW5tb3VudCwgc2hhbGxvd1JlZiwgY3JlYXRlVk5vZGUgfSBmcm9tICJ2dWUiOwoKLyogZXNsaW50IG5vLXVzZS1iZWZvcmUtZGVmaW5lOiAwICovCmltcG9ydCAqIGFzIE1vbmFjbyBmcm9tICdtb25hY28tZWRpdG9yJzsKaW1wb3J0IHsgY3JlYXRlVXNlU3R5bGVzIH0gZnJvbSAndnVlLWpzcyc7CnZhciB1c2VTdHlsZXMgPSBjcmVhdGVVc2VTdHlsZXMoewogIGNvbnRhaW5lcjogewogICAgYm9yZGVyOiAnMXB4IHNvbGlkICNlZWUnLAogICAgZGlzcGxheTogJ2ZsZXgnLAogICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsCiAgICBib3JkZXJSYWRpdXM6IDUKICB9LAogIHRpdGxlOiB7CiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZWVlJywKICAgIHBhZGRpbmc6ICcxMHB4IDAnLAogICAgcGFkZGluZ0xlZnQ6IDIwCiAgfSwKICBjb2RlOiB7CiAgICBmbGV4R3JvdzogMQogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgcHJvcHM6IHsKICAgIGNvZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIG9uQ2hhbmdlOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHRpdGxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcykgewogICAgLy8gbXVzdCBiZSBzaGFsbG93UmVmLCBpZiBub3QsIGVkaXRvci5nZXRWYWx1ZSgpIHdvbid0IHdvcmsKICAgIHZhciBlZGl0b3JSZWYgPSBzaGFsbG93UmVmKCk7CiAgICB2YXIgY29udGFpbmVyUmVmID0gcmVmKCk7CgogICAgdmFyIF9zdWJzY3JpcHRpb247CgogICAgdmFyIF9fcHJldmVudF90cmlnZ2VyX2NoYW5nZV9ldmVudCA9IGZhbHNlOwogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGVkaXRvciA9IGVkaXRvclJlZi52YWx1ZSA9IE1vbmFjby5lZGl0b3IuY3JlYXRlKGNvbnRhaW5lclJlZi52YWx1ZSwgewogICAgICAgIHZhbHVlOiBwcm9wcy5jb2RlLAogICAgICAgIGxhbmd1YWdlOiAnanNvbicsCiAgICAgICAgZm9ybWF0T25QYXN0ZTogdHJ1ZSwKICAgICAgICB0YWJTaXplOiAyLAogICAgICAgIG1pbmltYXA6IHsKICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlCiAgICAgICAgfQogICAgICB9KTsKICAgICAgX3N1YnNjcmlwdGlvbiA9IGVkaXRvci5vbkRpZENoYW5nZU1vZGVsQ29udGVudChmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS0tPicsIF9fcHJldmVudF90cmlnZ2VyX2NoYW5nZV9ldmVudCk7CgogICAgICAgIGlmICghX19wcmV2ZW50X3RyaWdnZXJfY2hhbmdlX2V2ZW50KSB7CiAgICAgICAgICBwcm9wcy5vbkNoYW5nZShlZGl0b3IuZ2V0VmFsdWUoKSwgZXZlbnQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICAgIG9uQmVmb3JlVW5tb3VudChmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChfc3Vic2NyaXB0aW9uKSBfc3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTsKICAgIH0pOwogICAgd2F0Y2goZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcHJvcHMuY29kZTsKICAgIH0sIGZ1bmN0aW9uICh2KSB7CiAgICAgIHZhciBlZGl0b3IgPSBlZGl0b3JSZWYudmFsdWU7CiAgICAgIHZhciBtb2RlbCA9IGVkaXRvci5nZXRNb2RlbCgpOwoKICAgICAgaWYgKHYgIT09IG1vZGVsLmdldFZhbHVlKCkpIHsKICAgICAgICBlZGl0b3IucHVzaFVuZG9TdG9wKCk7CiAgICAgICAgX19wcmV2ZW50X3RyaWdnZXJfY2hhbmdlX2V2ZW50ID0gdHJ1ZTsgLy8gcHVzaEVkaXRPcGVyYXRpb25zIHNheXMgaXQgZXhwZWN0cyBhIGN1cnNvckNvbXB1dGVyLCBidXQgZG9lc24ndCBzZWVtIHRvIG5lZWQgb25lLgoKICAgICAgICBtb2RlbC5wdXNoRWRpdE9wZXJhdGlvbnMoW10sIFt7CiAgICAgICAgICByYW5nZTogbW9kZWwuZ2V0RnVsbE1vZGVsUmFuZ2UoKSwKICAgICAgICAgIHRleHQ6IHYKICAgICAgICB9XSk7CiAgICAgICAgZWRpdG9yLnB1c2hVbmRvU3RvcCgpOwogICAgICAgIF9fcHJldmVudF90cmlnZ2VyX2NoYW5nZV9ldmVudCA9IGZhbHNlOwogICAgICB9IC8vIGlmICh2ICE9PSBlZGl0b3JSZWYudmFsdWUuZ2V0VmFsdWUoKSkgewogICAgICAvLyAgIGVkaXRvclJlZi52YWx1ZS5zZXRWYWx1ZSh2KQogICAgICAvLyB9CgogICAgfSk7CiAgICB2YXIgY2xhc3Nlc1JlZiA9IHVzZVN0eWxlcygpOwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGNsYXNzZXMgPSBjbGFzc2VzUmVmLnZhbHVlOwogICAgICByZXR1cm4gY3JlYXRlVk5vZGUoImRpdiIsIHsKICAgICAgICAiY2xhc3MiOiBjbGFzc2VzLmNvbnRhaW5lcgogICAgICB9LCBbY3JlYXRlVk5vZGUoImRpdiIsIHsKICAgICAgICAiY2xhc3MiOiBjbGFzc2VzLnRpdGxlCiAgICAgIH0sIFtjcmVhdGVWTm9kZSgic3BhbiIsIG51bGwsIFtwcm9wcy50aXRsZV0pXSksIGNyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICAgICAgImNsYXNzIjogY2xhc3Nlcy5jb2RlLAogICAgICAgICJyZWYiOiBjb250YWluZXJSZWYKICAgICAgfSwgbnVsbCldKTsKICAgIH07CiAgfQp9KTs="},{"version":3,"sources":["/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/eslint-loader/index.js??ref--13-0!/Users/junronngcai/Downloads/vue3-json-schema-form/src/components/MonacoEditor.tsx"],"names":[],"mappings":"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","sourcesContent":["/* eslint no-use-before-define: 0 */\n\nimport { defineComponent, ref, onMounted, watch, onBeforeUnmount, shallowReadonly, shallowRef } from 'vue'\n\nimport * as Monaco from 'monaco-editor'\n\nimport type { PropType, Ref } from 'vue'\nimport { createUseStyles } from 'vue-jss'\n\nconst useStyles = createUseStyles({\n  container: {\n    border: '1px solid #eee',\n    display: 'flex',\n    flexDirection: 'column',\n    borderRadius: 5\n  },\n  title: {\n    backgroundColor: '#eee',\n    padding: '10px 0',\n    paddingLeft: 20,\n  },\n  code: {\n    flexGrow: 1\n  }\n})\n\nexport default defineComponent({\n  props: {\n    code: {\n      type: String as PropType<string>,\n      required: true\n    },\n    onChange: {\n      type: Function as PropType<(value: string, event: Monaco.editor.IModelContentChangedEvent) => void>,\n      required: true\n    },\n    title: {\n      type: String as PropType<string>,\n      required: true\n    }\n  },\n  setup(props) {\n    // must be shallowRef, if not, editor.getValue() won't work\n    const editorRef = shallowRef()\n\n    const containerRef = ref()\n\n    let _subscription: Monaco.IDisposable | undefined\n    let __prevent_trigger_change_event = false\n\n    onMounted(() => {\n      const editor = editorRef.value = Monaco.editor.create(containerRef.value, {\n        value: props.code,\n        language: 'json',\n        formatOnPaste: true,\n        tabSize: 2,\n        minimap: {\n          enabled: false,\n        },\n      })\n\n      _subscription = editor.onDidChangeModelContent((event) => {\n        console.log('--------->', __prevent_trigger_change_event)\n        if (!__prevent_trigger_change_event) {\n          props.onChange(editor.getValue(), event);\n        }\n      });\n    })\n\n    onBeforeUnmount(() => {\n      if (_subscription)\n        _subscription.dispose()\n    })\n\n    watch(() => props.code, (v) => {\n      const editor = editorRef.value\n      const model = editor.getModel()\n      if (v !== model.getValue()) {\n        editor.pushUndoStop();\n        __prevent_trigger_change_event = true\n        // pushEditOperations says it expects a cursorComputer, but doesn't seem to need one.\n        model.pushEditOperations(\n          [],\n          [\n            {\n              range: model.getFullModelRange(),\n              text: v,\n            },\n          ]\n        );\n        editor.pushUndoStop();\n        __prevent_trigger_change_event = false\n      }\n      // if (v !== editorRef.value.getValue()) {\n      //   editorRef.value.setValue(v)\n      // }\n    })\n\n    const classesRef = useStyles()\n\n    return () => {\n\n      const classes = classesRef.value\n\n      return (\n        <div class={classes.container}>\n          <div class={classes.title}><span>{props.title}</span></div>\n          <div class={classes.code} ref={containerRef}></div>\n        </div>\n      )\n    }\n  }\n})"],"sourceRoot":""}]}