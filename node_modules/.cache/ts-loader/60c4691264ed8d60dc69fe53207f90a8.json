{"remainingRequest":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/babel-loader/lib/index.js!/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/ts-loader/index.js??ref--15-2!/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/eslint-loader/index.js??ref--13-0!/Users/junronngcai/Downloads/vue3-json-schema-form/lib/fields/ObjectField.tsx","dependencies":[{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/lib/fields/ObjectField.tsx","mtime":1608697522541},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/cache-loader/dist/cjs.js","mtime":1607437832202},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/babel-loader/lib/index.js","mtime":1608516392415},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/ts-loader/index.js","mtime":1608516394013},{"path":"/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/eslint-loader/index.js","mtime":1607437999134}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIGNyZWF0ZVZOb2RlIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgRmlsZWRQcm9wc0RlZmluZSB9IGZyb20gJy4uL3R5cGVzJzsKaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuLi91dGlscyc7CmltcG9ydCB7IHVzZVZKU0ZDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dCc7IC8vIGltcG9ydCBTY2hlbWFJdGVtIGZyb20gJy4uL1NjaGVtYUl0ZW0nCi8vIGNvbnNvbGUubG9nKFNjaGVtYUl0ZW0pCgp2YXIgc2NoZW1hID0gewogIHR5cGU6ICdvYmplY3QnLAogIHByb3BlcnRpZXM6IHsKICAgIG5hbWU6IHsKICAgICAgdHlwZTogJ3N0cmluZycKICAgIH0sCiAgICBhZ2U6IHsKICAgICAgdHlwZTogJ251bWJlcicKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgbmFtZTogJ09iamVjdEZpZWxkJywKICBwcm9wczogRmlsZWRQcm9wc0RlZmluZSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMpIHsKICAgIHZhciBjb250ZXh0ID0gdXNlVkpTRkNvbnRleHQoKTsKCiAgICB2YXIgaGFuZGxlT2JqZWN0RmllbGRDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVPYmplY3RGaWVsZENoYW5nZShrZXksIHYpIHsKICAgICAgdmFyIHZhbHVlID0gaXNPYmplY3QocHJvcHMudmFsdWUpID8gcHJvcHMudmFsdWUgOiB7fTsKCiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHsKICAgICAgICBkZWxldGUgdmFsdWVba2V5XTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWx1ZVtrZXldID0gdjsKICAgICAgfQoKICAgICAgcHJvcHMub25DaGFuZ2UodmFsdWUpOwogICAgfTsKCiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2NoZW1hID0gcHJvcHMuc2NoZW1hLAogICAgICAgICAgcm9vdFNjaGVtYSA9IHByb3BzLnJvb3RTY2hlbWEsCiAgICAgICAgICB2YWx1ZSA9IHByb3BzLnZhbHVlLAogICAgICAgICAgZXJyb3JTY2hlbWEgPSBwcm9wcy5lcnJvclNjaGVtYSwKICAgICAgICAgIHVpU2NoZW1hID0gcHJvcHMudWlTY2hlbWE7CiAgICAgIHZhciBTY2hlbWFJdGVtID0gY29udGV4dC5TY2hlbWFJdGVtOwogICAgICB2YXIgcHJvcGVydGllcyA9IHNjaGVtYS5wcm9wZXJ0aWVzIHx8IHt9OwogICAgICB2YXIgY3VycmVudFZhbHVlID0gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiB7fTsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLm1hcChmdW5jdGlvbiAoaywgaW5kZXgpIHsKICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoU2NoZW1hSXRlbSwgewogICAgICAgICAgInNjaGVtYSI6IHByb3BlcnRpZXNba10sCiAgICAgICAgICAicm9vdFNjaGVtYSI6IHJvb3RTY2hlbWEsCiAgICAgICAgICAidWlTY2hlbWEiOiB1aVNjaGVtYS5wcm9wZXJ0aWVzID8gdWlTY2hlbWEucHJvcGVydGllc1trXSB8fCB7fSA6IHt9LAogICAgICAgICAgInZhbHVlIjogY3VycmVudFZhbHVlW2tdLAogICAgICAgICAgImVycm9yU2NoZW1hIjogZXJyb3JTY2hlbWFba10gfHwge30sCiAgICAgICAgICAia2V5IjogaW5kZXgsCiAgICAgICAgICAib25DaGFuZ2UiOiBmdW5jdGlvbiBvbkNoYW5nZSh2KSB7CiAgICAgICAgICAgIHJldHVybiBoYW5kbGVPYmplY3RGaWVsZENoYW5nZShrLCB2KTsKICAgICAgICAgIH0KICAgICAgICB9LCBudWxsKTsKICAgICAgfSk7CiAgICB9OwogIH0KfSk7"},{"version":3,"sources":["/Users/junronngcai/Downloads/vue3-json-schema-form/node_modules/eslint-loader/index.js??ref--13-0!/Users/junronngcai/Downloads/vue3-json-schema-form/lib/fields/ObjectField.tsx"],"names":[],"mappings":";;;AASA,SAAS,gBAAT,QAAkD,UAAlD;AACA,SAAS,QAAT,QAAyB,UAAzB;AACA,SAA+B,cAA/B,QAAqD,YAArD,C,CAEA;AAEA;;AAEA,IAAM,MAAM,GAAG;AACb,EAAA,IAAI,EAAE,QADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,IAAI,EAAE;AACJ,MAAA,IAAI,EAAE;AADF,KADI;AAIV,IAAA,GAAG,EAAE;AACH,MAAA,IAAI,EAAE;AADH;AAJK;AAFC,CAAf;AAYA,eAAe,eAAe,CAAC;AAC7B,EAAA,IAAI,EAAE,aADuB;AAE7B,EAAA,KAAK,EAAE,gBAFsB;AAG7B,EAAA,KAH6B,iBAGvB,KAHuB,EAGlB;AACT,QAAM,OAAO,GAAG,cAAc,EAA9B;;AAEA,QAAM,uBAAuB,GAAG,SAA1B,uBAA0B,CAAC,GAAD,EAAc,CAAd,EAAwB;AACtD,UAAM,KAAK,GAAQ,QAAQ,CAAC,KAAK,CAAC,KAAP,CAAR,GAAwB,KAAK,CAAC,KAA9B,GAAsC,EAAzD;;AAEA,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,eAAO,KAAK,CAAC,GAAD,CAAZ;AACD,OAFD,MAEO;AACL,QAAA,KAAK,CAAC,GAAD,CAAL,GAAa,CAAb;AACD;;AAED,MAAA,KAAK,CAAC,QAAN,CAAe,KAAf;AACD,KAVD;;AAYA,WAAO,YAAK;AAAA,UACF,MADE,GACmD,KADnD,CACF,MADE;AAAA,UACM,UADN,GACmD,KADnD,CACM,UADN;AAAA,UACkB,KADlB,GACmD,KADnD,CACkB,KADlB;AAAA,UACyB,WADzB,GACmD,KADnD,CACyB,WADzB;AAAA,UACsC,QADtC,GACmD,KADnD,CACsC,QADtC;AAAA,UAGF,UAHE,GAGa,OAHb,CAGF,UAHE;AAKV,UAAM,UAAU,GAAG,MAAM,CAAC,UAAP,IAAqB,EAAxC;AAEA,UAAM,YAAY,GAAQ,QAAQ,CAAC,KAAD,CAAR,GAAkB,KAAlB,GAA0B,EAApD;AAEA,aAAO,MAAM,CAAC,IAAP,CAAY,UAAZ,EAAwB,GAAxB,CAA4B,UAAC,CAAD,EAAY,KAAZ;AAAA;AAAA,oBAEvB,UAAU,CAAC,CAAD,CAFa;AAAA,wBAGnB,UAHmB;AAAA,sBAIrB,QAAQ,CAAC,UAAT,GAAsB,QAAQ,CAAC,UAAT,CAAoB,CAApB,KAA0B,EAAhD,GAAqD,EAJhC;AAAA,mBAKxB,YAAY,CAAC,CAAD,CALY;AAAA,yBAMlB,WAAW,CAAC,CAAD,CAAX,IAAkB,EANA;AAAA,iBAO1B,KAP0B;AAAA,sBAQrB,kBAAC,CAAD;AAAA,mBAAY,uBAAuB,CAAC,CAAD,EAAI,CAAJ,CAAnC;AAAA;AARqB;AAAA,OAA5B,CAAP;AAWD,KApBD;AAqBD;AAvC4B,CAAD,CAA9B","sourcesContent":["import {\n  defineComponent,\n  inject,\n  watchEffect,\n  DefineComponent,\n  ExtractPropTypes,\n  ComponentPublicInstance,\n} from 'vue'\n\nimport { FiledPropsDefine, CommonFieldType } from '../types'\nimport { isObject } from '../utils'\nimport { SchemaFormContextKey, useVJSFContext } from '../context'\n\n// import SchemaItem from '../SchemaItem'\n\n// console.log(SchemaItem)\n\nconst schema = {\n  type: 'object',\n  properties: {\n    name: {\n      type: 'string',\n    },\n    age: {\n      type: 'number',\n    },\n  },\n}\n\nexport default defineComponent({\n  name: 'ObjectField',\n  props: FiledPropsDefine,\n  setup(props) {\n    const context = useVJSFContext()\n\n    const handleObjectFieldChange = (key: string, v: any) => {\n      const value: any = isObject(props.value) ? props.value : {}\n\n      if (v === undefined) {\n        delete value[key]\n      } else {\n        value[key] = v\n      }\n\n      props.onChange(value)\n    }\n\n    return () => {\n      const { schema, rootSchema, value, errorSchema, uiSchema } = props\n\n      const { SchemaItem } = context\n\n      const properties = schema.properties || {}\n\n      const currentValue: any = isObject(value) ? value : {}\n\n      return Object.keys(properties).map((k: string, index: number) => (\n        <SchemaItem\n          schema={properties[k]}\n          rootSchema={rootSchema}\n          uiSchema={uiSchema.properties ? uiSchema.properties[k] || {} : {}}\n          value={currentValue[k]}\n          errorSchema={errorSchema[k] || {}}\n          key={index}\n          onChange={(v: any) => handleObjectFieldChange(k, v)}\n        />\n      ))\n    }\n  },\n})\n"],"sourceRoot":""}]}